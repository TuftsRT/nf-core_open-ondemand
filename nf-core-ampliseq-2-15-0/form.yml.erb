---
cluster: "pax"

attributes:
<%= File.read("/etc/ood/config/apps/dashboard/batch_connect/partials/cpu_partition.yml").indent(2) %>
<%= File.read("/etc/ood/config/apps/dashboard/batch_connect/partials/num_cores_generic.yml").indent(2) %>
<%= File.read("/etc/ood/config/apps/dashboard/batch_connect/partials/num_memory_generic.yml").indent(2) %>

  executor:
    label: Which nextflow executor to use?
    widget: select
    options:
    - [
        "slurm", "slurm",
        data-hide-partition: true,
        data-hide-num-cores: true,
        data-hide-num-memory: true
      ]
    - ["local", "local"]
    help: |
      With slurm, tasks will be distributed to different nodes, local means all tasks will run on a single node.

  workdir:
    label: "Working Directory"
    widget: "path_selector"
    directory: "/cluster/tufts"
    required: false
    label: Working directory
    favorites:
        - /cluster/tufts
        - /cluster/home
    
  resume:
    label: Resume
    widget: check_box
    checked_value: 1
    unchecked_value: 0
    help: |
           Resume previous run if found

  tower_access_token:
    widget: "text_field"
    required: false
    label: "TOWER_ACCESS_TOKEN (Optional)"
    help: "Your TOWER_ACCESS_TOKEN used to monitor runs on [Nextflow Tower](https://seqera.io)."



  input_output_options:
    label: "Main arguments"
    widget: 'check_box'
    html_options:
      data:
        hide-input-when-un-checked: true
        hide-input_fasta-when-un-checked: true
        hide-input_folder-when-un-checked: true
        hide-fw_primer-when-un-checked: true
        hide-rv_primer-when-un-checked: true
        hide-metadata-when-un-checked: true
        hide-multiregion-when-un-checked: true
        hide-outdir-when-un-checked: true
        hide-save_intermediates-when-un-checked: true

  input:
    label: "input"
    widget: path_selector
    directory: /cluster/tufts
    favorites:
      - /cluster/tufts
      - /cluster/home 
    help: "Path to tab-separated sample sheet"

  input_fasta:
    label: "input_fasta"
    widget: path_selector
    directory: /cluster/tufts
    favorites:
      - /cluster/tufts
      - /cluster/home 
    help: "Path to ASV/OTU fasta file"

  input_folder:
    label: "input_folder"
    widget: path_selector
    directory: /cluster/tufts
    favorites:
      - /cluster/tufts
      - /cluster/home 
    help: "Path to folder containing zipped FastQ files"

  fw_primer:
    label: "FW_primer"
    widget: text_field
    help: "Forward primer sequence"

  rv_primer:
    label: "RV_primer"
    widget: text_field
    help: "Reverse primer sequence"

  metadata:
    label: "metadata"
    widget: path_selector
    directory: /cluster/tufts
    favorites:
      - /cluster/tufts
      - /cluster/home 
    help: "Path to metadata sheet, when missing most downstream analysis are skipped (barplots, PCoA plots, ...)."

  multiregion:
    label: "multiregion"
    widget: path_selector
    directory: /cluster/tufts
    favorites:
      - /cluster/tufts
      - /cluster/home 
    help: "Path to multi-region definition sheet, for multi-region analysis with Sidle"

  outdir:
    label: "outdir"
    widget: path_selector
    directory: /cluster/tufts
    favorites:
      - /cluster/tufts
      - /cluster/home 
    help: "The output directory where the results will be saved. You have to use absolute paths to storage on Cloud infrastructure."

  save_intermediates:
    label: "save_intermediates"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Save intermediate results such as QIIME2`s qza and qzv files"

  sequencing_input:
    label: "Sequencing input"
    widget: 'check_box'
    html_options:
      data:
        hide-illumina_novaseq-when-un-checked: true
        hide-pacbio-when-un-checked: true
        hide-iontorrent-when-un-checked: true
        hide-single_end-when-un-checked: true
        hide-illumina_pe_its-when-un-checked: true
        hide-quality_type-when-un-checked: true
        hide-multiple_sequencing_runs-when-un-checked: true
        hide-extension-when-un-checked: true
        hide-min_read_counts-when-un-checked: true
        hide-ignore_empty_input_files-when-un-checked: true

  illumina_novaseq:
    label: "illumina_novaseq"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If data has binned quality scores such as Illumina NovaSeq"

  pacbio:
    label: "pacbio"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If data is single-ended PacBio reads instead of Illumina"

  iontorrent:
    label: "iontorrent"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If data is single-ended IonTorrent reads instead of Illumina"

  single_end:
    label: "single_end"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If data is single-ended Illumina reads instead of paired-end"

  illumina_pe_its:
    label: "illumina_pe_its"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If analysing ITS amplicons or any other region with large length variability with Illumina paired end reads"

  quality_type:
    label: "quality_type"
    widget: select
    options:
      - ['Auto', 'Auto']
      - ['FastqQuality', 'FastqQuality']
      - ['SFastqQuality', 'SFastqQuality']
    help: "Type of quality scores in raw read data"

  multiple_sequencing_runs:
    label: "multiple_sequencing_runs"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If using `--input_folder`: samples were sequenced in multiple sequencing runs"

  extension:
    label: "extension"
    widget: text_field
    value: "/*_R{1,2}_001.fastq.gz"
    help: "If using `--input_folder`: naming of sequencing files"

  min_read_counts:
    label: "min_read_counts"
    widget: number_field
    value: 1
    step: 1
    help: "Set read count threshold for failed samples."

  ignore_empty_input_files:
    label: "ignore_empty_input_files"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Ignore input files with too few reads."

  primer_removal:
    label: "Primer removal"
    widget: 'check_box'
    html_options:
      data:
        hide-retain_untrimmed-when-un-checked: true
        hide-cutadapt_min_overlap-when-un-checked: true
        hide-cutadapt_max_error_rate-when-un-checked: true
        hide-double_primer-when-un-checked: true
        hide-ignore_failed_trimming-when-un-checked: true
    help: "Spurious sequences sometimes lack primer sequences and primers introduce errors that can be removed in that step"

  retain_untrimmed:
    label: "retain_untrimmed"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Cutadapt will retain untrimmed reads, choose only if input reads are not expected to contain primer sequences."

  cutadapt_min_overlap:
    label: "cutadapt_min_overlap"
    widget: number_field
    value: 3
    step: 1
    help: "Sets the minimum overlap for valid matches of primer sequences with reads for cutadapt (-O)."

  cutadapt_max_error_rate:
    label: "cutadapt_max_error_rate"
    widget: number_field
    value: 0.1
    step: 1
    help: "Sets the maximum error rate for valid matches of primer sequences with reads for cutadapt (-e)."

  double_primer:
    label: "double_primer"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Cutadapt will be run twice to ensure removal of potential double primers"

  ignore_failed_trimming:
    label: "ignore_failed_trimming"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Ignore files with too few reads after trimming."

  read_trimming_and_quality_filtering:
    label: "Read trimming and quality filtering"
    widget: 'check_box'
    html_options:
      data:
        hide-truncq-when-un-checked: true
        hide-trunclenf-when-un-checked: true
        hide-trunclenr-when-un-checked: true
        hide-trunc_qmin-when-un-checked: true
        hide-trunc_rmin-when-un-checked: true
        hide-max_ee-when-un-checked: true
        hide-min_len-when-un-checked: true
        hide-max_len-when-un-checked: true
        hide-ignore_failed_filtering-when-un-checked: true
    help: "Read trimming and quality filtering is supposed to reduce spurious results and aid error correction"

  truncq:
    label: "truncq"
    widget: number_field
    value: 2
    step: 1
    help: "Truncate each read at the first instance of a quality score less than or equal to `--truncq`."

  trunclenf:
    label: "trunclenf"
    widget: number_field
    step: 1
    help: "DADA2 read truncation value for forward strand, set this to 0 for no truncation"

  trunclenr:
    label: "trunclenr"
    widget: number_field
    step: 1
    help: "DADA2 read truncation value for reverse strand, set this to 0 for no truncation"

  trunc_qmin:
    label: "trunc_qmin"
    widget: number_field
    value: 25
    step: 1
    help: "If --trunclenf and --trunclenr are not set, these values will be automatically determined using this median quality score"

  trunc_rmin:
    label: "trunc_rmin"
    widget: number_field
    value: 0.75
    step: 1
    help: "Assures that values chosen with --trunc_qmin will retain a fraction of reads."

  max_ee:
    label: "max_ee"
    widget: number_field
    value: 2
    step: 1
    help: "DADA2 read filtering option"

  min_len:
    label: "min_len"
    widget: number_field
    value: 50
    step: 1
    help: "DADA2 read filtering option"

  max_len:
    label: "max_len"
    widget: number_field
    step: 1
    help: "DADA2 read filtering option"

  ignore_failed_filtering:
    label: "ignore_failed_filtering"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Ignore files with too few reads after quality filtering."

  amplicon_sequence_variants_asv_calculation:
    label: "Amplicon Sequence Variants (ASV) calculation"
    widget: 'check_box'
    html_options:
      data:
        hide-sample_inference-when-un-checked: true
        hide-mergepairs_strategy-when-un-checked: true
        hide-mergepairs_consensus_match-when-un-checked: true
        hide-mergepairs_consensus_mismatch-when-un-checked: true
        hide-mergepairs_consensus_gap-when-un-checked: true
        hide-mergepairs_consensus_minoverlap-when-un-checked: true
        hide-mergepairs_consensus_maxmismatch-when-un-checked: true
        hide-mergepairs_consensus_percentile_cutoff-when-un-checked: true

  sample_inference:
    label: "sample_inference"
    widget: select
    options:
      - ['independent', 'independent']
      - ['pooled', 'pooled']
      - ['pseudo', 'pseudo']
    help: "Mode of sample inference: `independent`, `pooled` or `pseudo`"

  mergepairs_strategy:
    label: "mergepairs_strategy"
    widget: select
    options:
      - ['merge', 'merge']
      - ['concatenate', 'concatenate']
      - ['consensus', 'consensus']
    help: "Strategy to merge paired end reads. When paired end reads are not sufficiently overlapping for merging, you can use `concatenate` (not recommended). When you have a mix of overlapping and non overlapping reads use `consensus`"

  mergepairs_consensus_match:
    label: "mergepairs_consensus_match"
    widget: number_field
    value: 1
    step: 1
    help: "The score assigned for each matching base pair during sequence alignment."

  mergepairs_consensus_mismatch:
    label: "mergepairs_consensus_mismatch"
    widget: number_field
    value: -2
    step: 1
    help: "The penalty score assigned for each mismatched base pair during sequence alignment."

  mergepairs_consensus_gap:
    label: "mergepairs_consensus_gap"
    widget: number_field
    value: -4
    step: 1
    help: "The penalty score assigned for each gap introduced during sequence alignment."

  mergepairs_consensus_minoverlap:
    label: "mergepairs_consensus_minoverlap"
    widget: number_field
    value: 12
    step: 1
    help: "The minimum number of overlapping base pairs required to merge forward and reverse reads."

  mergepairs_consensus_maxmismatch:
    label: "mergepairs_consensus_maxmismatch"
    widget: number_field
    value: 0
    step: 1
    help: "The maximum number of mismatches allowed within the overlapping region for merging reads."

  mergepairs_consensus_percentile_cutoff:
    label: "mergepairs_consensus_percentile_cutoff"
    widget: number_field
    value: 0.001
    step: 1
    help: "The percentile used to determine a stringent cutoff which will correspond to the minimum observed overlap in the dataset. This ensures that only read pairs with high overlap are merged into consensus sequences. Those with insufficient overlap are concatenated."

  asv_post_processing:
    label: "ASV post processing"
    widget: 'check_box'
    html_options:
      data:
        hide-vsearch_cluster-when-un-checked: true
        hide-vsearch_cluster_id-when-un-checked: true
        hide-raise_filter_stacksize-when-un-checked: true
        hide-filter_ssu-when-un-checked: true
        hide-min_len_asv-when-un-checked: true
        hide-max_len_asv-when-un-checked: true
        hide-filter_codons-when-un-checked: true
        hide-orf_start-when-un-checked: true
        hide-orf_end-when-un-checked: true
        hide-stop_codons-when-un-checked: true
    help: "ASV post-processing takes place after ASV computation but before taxonomic assignment, it will affect all downstream processes"

  vsearch_cluster:
    label: "vsearch_cluster"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Post-cluster ASVs with VSEARCH"

  vsearch_cluster_id:
    label: "vsearch_cluster_id"
    widget: number_field
    value: 0.97
    step: 1
    help: "Pairwise Identity value used when post-clustering ASVs if `--vsearch_cluster` option is used (default: 0.97)."

  raise_filter_stacksize:
    label: "raise_filter_stacksize"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Raise stack size when filtering VSEARCH clusters"

  filter_ssu:
    label: "filter_ssu"
    widget: select
    options:
      - ['bac,arc,mito,euk', 'bac,arc,mito,euk']
      - ['bac', 'bac']
      - ['arc', 'arc']
      - ['mito', 'mito']
      - ['euk', 'euk']
      - ['bac,arc', 'bac,arc']
      - ['bac,mito', 'bac,mito']
      - ['bac,euk', 'bac,euk']
      - ['arc,mito', 'arc,mito']
      - ['arc,euk', 'arc,euk']
      - ['mito,euk', 'mito,euk']
      - ['bac,arc,mito', 'bac,arc,mito']
      - ['bac,mito,euk', 'bac,mito,euk']
      - ['arc,mito,euk', 'arc,mito,euk']
    help: "Enable SSU filtering. Comma separated list of kingdoms (domains) in Barrnap, a combination (or one) of `bac`, `arc`, `mito`, and `euk`. ASVs that have their lowest evalue in that kingdoms are kept."

  min_len_asv:
    label: "min_len_asv"
    widget: number_field
    step: 1
    help: "Minimal ASV length"

  max_len_asv:
    label: "max_len_asv"
    widget: number_field
    step: 1
    help: "Maximum ASV length"

  filter_codons:
    label: "filter_codons"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Filter ASVs based on codon usage"

  orf_start:
    label: "orf_start"
    widget: number_field
    value: 1
    step: 1
    help: "Starting position of codon tripletts"

  orf_end:
    label: "orf_end"
    widget: number_field
    step: 1
    help: "Ending position of codon tripletts"

  stop_codons:
    label: "stop_codons"
    widget: text_field
    value: "TAA,TAG"
    help: "Define stop codons"

  taxonomic_assignment:
    label: "Taxonomic assignment"
    widget: 'check_box'
    html_options:
      data:
        hide-dada_ref_taxonomy-when-un-checked: true
        hide-dada_ref_tax_custom-when-un-checked: true
        hide-dada_ref_tax_custom_sp-when-un-checked: true
        hide-dada_min_boot-when-un-checked: true
        hide-dada_assign_taxlevels-when-un-checked: true
        hide-cut_dada_ref_taxonomy-when-un-checked: true
        hide-dada_addspecies_allowmultiple-when-un-checked: true
        hide-dada_taxonomy_rc-when-un-checked: true
        hide-dada_assign_chunksize-when-un-checked: true
        hide-pplace_tree-when-un-checked: true
        hide-pplace_aln-when-un-checked: true
        hide-pplace_model-when-un-checked: true
        hide-pplace_alnmethod-when-un-checked: true
        hide-pplace_taxonomy-when-un-checked: true
        hide-pplace_name-when-un-checked: true
        hide-qiime_ref_taxonomy-when-un-checked: true
        hide-qiime_ref_tax_custom-when-un-checked: true
        hide-classifier-when-un-checked: true
        hide-kraken2_ref_taxonomy-when-un-checked: true
        hide-kraken2_ref_tax_custom-when-un-checked: true
        hide-kraken2_assign_taxlevels-when-un-checked: true
        hide-kraken2_confidence-when-un-checked: true
        hide-sintax_ref_taxonomy-when-un-checked: true
        hide-addsh-when-un-checked: true
        hide-cut_its-when-un-checked: true
        hide-its_partial-when-un-checked: true
    help: "Choose a method and database for taxonomic assignments to single-region amplicons"

  dada_ref_taxonomy:
    label: "dada_ref_taxonomy"
    widget: select
    options:
      - ['silva=138.2', 'silva=138.2']
      - ['coidb', 'coidb']
      - ['coidb=221216', 'coidb=221216']
      - ['greengenes2', 'greengenes2']
      - ['greengenes2=2024.09', 'greengenes2=2024.09']
      - ['gtdb', 'gtdb']
      - ['gtdb=R05-RS95', 'gtdb=R05-RS95']
      - ['gtdb=R06-RS202', 'gtdb=R06-RS202']
      - ['gtdb=R07-RS207', 'gtdb=R07-RS207']
      - ['gtdb=R08-RS214', 'gtdb=R08-RS214']
      - ['gtdb=R09-RS220', 'gtdb=R09-RS220']
      - ['gtdb=R10-RS226', 'gtdb=R10-RS226']
      - ['midori2-co1', 'midori2-co1']
      - ['midori2-co1=gb250', 'midori2-co1=gb250']
      - ['pr2', 'pr2']
      - ['pr2=4.13.0', 'pr2=4.13.0']
      - ['pr2=4.14.0', 'pr2=4.14.0']
      - ['pr2=5.0.0', 'pr2=5.0.0']
      - ['pr2=5.1.0', 'pr2=5.1.0']
      - ['rdp', 'rdp']
      - ['rdp=18', 'rdp=18']
      - ['sbdi-gtdb', 'sbdi-gtdb']
      - ['sbdi-gtdb=R10-RS226-1', 'sbdi-gtdb=R10-RS226-1']
      - ['sbdi-gtdb=R09-RS220-2', 'sbdi-gtdb=R09-RS220-2']
      - ['sbdi-gtdb=R09-RS220-1', 'sbdi-gtdb=R09-RS220-1']
      - ['sbdi-gtdb=R08-RS214-1', 'sbdi-gtdb=R08-RS214-1']
      - ['sbdi-gtdb=R07-RS207-1', 'sbdi-gtdb=R07-RS207-1']
      - ['sbdi-gtdb=R06-RS202-3', 'sbdi-gtdb=R06-RS202-3']
      - ['sbdi-gtdb=R06-RS202-1', 'sbdi-gtdb=R06-RS202-1']
      - ['silva', 'silva']
      - ['silva=138', 'silva=138']
      - ['silva=132', 'silva=132']
      - ['unite-alleuk', 'unite-alleuk']
      - ['unite-alleuk=10.0', 'unite-alleuk=10.0']
      - ['unite-alleuk=9.0', 'unite-alleuk=9.0']
      - ['unite-alleuk=8.3', 'unite-alleuk=8.3']
      - ['unite-alleuk=8.2', 'unite-alleuk=8.2']
      - ['unite-fungi', 'unite-fungi']
      - ['unite-fungi=10.0', 'unite-fungi=10.0']
      - ['unite-fungi=9.0', 'unite-fungi=9.0']
      - ['unite-fungi=8.3', 'unite-fungi=8.3']
      - ['unite-fungi=8.2', 'unite-fungi=8.2']
      - ['zehr-nifh', 'zehr-nifh']
      - ['zehr-nifh=2.5.0', 'zehr-nifh=2.5.0']
    help: "Name of supported database, and optionally also version number"

  dada_ref_tax_custom:
    label: "dada_ref_tax_custom"
    widget: text_field
    help: "Path to a custom DADA2 reference taxonomy database"

  dada_ref_tax_custom_sp:
    label: "dada_ref_tax_custom_sp"
    widget: text_field
    help: "Path to a custom DADA2 reference taxonomy database for species assignment"

  dada_min_boot:
    label: "dada_min_boot"
    widget: number_field
    value: 50
    step: 1
    help: "The minimum bootstrap confidence (out of 100 trials) for assigning a taxonomic level with DADA2. Matches `minBoot` in DADA2`s assignTaxonomy method."

  dada_assign_taxlevels:
    label: "dada_assign_taxlevels"
    widget: text_field
    help: "Comma separated list of taxonomic levels used in DADA2`s assignTaxonomy function"

  cut_dada_ref_taxonomy:
    label: "cut_dada_ref_taxonomy"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If the expected amplified sequences are extracted from the DADA2 reference taxonomy database"

  dada_addspecies_allowmultiple:
    label: "dada_addspecies_allowmultiple"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If multiple exact matches against different species are returned"

  dada_taxonomy_rc:
    label: "dada_taxonomy_rc"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If reverse-complement of each sequences will be also tested for classification"

  dada_assign_chunksize:
    label: "dada_assign_chunksize"
    widget: number_field
    value: 10000
    step: 1
    help: "ASV fasta will be subset into chunks of this size for classification"

  pplace_tree:
    label: "pplace_tree"
    widget: text_field
    help: "Newick file with reference phylogenetic tree. Requires also `--pplace_aln` and `--pplace_model`."

  pplace_aln:
    label: "pplace_aln"
    widget: text_field
    help: "File with reference sequences. Requires also `--pplace_tree` and `--pplace_model`."

  pplace_model:
    label: "pplace_model"
    widget: text_field
    help: "Phylogenetic model to use in placement, e.g. `LG+F` or `GTR+I+F`. Requires also `--pplace_tree` and `--pplace_aln`."

  pplace_alnmethod:
    label: "pplace_alnmethod"
    widget: select
    options:
      - ['hmmer', 'hmmer']
      - ['mafft', 'mafft']
    help: "Method used for alignment, `hmmer` or `mafft`"

  pplace_taxonomy:
    label: "pplace_taxonomy"
    widget: text_field
    help: "Tab-separated file with taxonomy assignments of reference sequences."

  qiime_ref_taxonomy:
    label: "qiime_ref_taxonomy"
    widget: select
    options:
      - ['silva=138', 'silva=138']
      - ['silva', 'silva']
      - ['greengenes85', 'greengenes85']
      - ['greengenes2', 'greengenes2']
      - ['greengenes2=2024.09', 'greengenes2=2024.09']
      - ['greengenes2=2022.10', 'greengenes2=2022.10']
    help: "Name of supported database, and optionally also version number"

  qiime_ref_tax_custom:
    label: "qiime_ref_tax_custom"
    widget: text_field
    help: "Path to files of a custom QIIME2 reference taxonomy database (tarball, or two comma-separated files)"

  classifier:
    label: "classifier"
    widget: text_field
    help: "Path to QIIME2 trained classifier file (typically *-classifier.qza)"

  kraken2_ref_taxonomy:
    label: "kraken2_ref_taxonomy"
    widget: select
    options:
      - ['silva', 'silva']
      - ['silva=138', 'silva=138']
      - ['silva=132', 'silva=132']
      - ['rdp', 'rdp']
      - ['rdp=18', 'rdp=18']
      - ['greengenes', 'greengenes']
      - ['greengenes=13.5', 'greengenes=13.5']
      - ['standard', 'standard']
      - ['standard=20240904', 'standard=20240904']
      - ['standard=20230605', 'standard=20230605']
    help: "Name of supported database, and optionally also version number"

  kraken2_ref_tax_custom:
    label: "kraken2_ref_tax_custom"
    widget: text_field
    help: "Path to a custom Kraken2 reference taxonomy database (*.tar.gz|*.tgz archive or folder)"

  kraken2_assign_taxlevels:
    label: "kraken2_assign_taxlevels"
    widget: text_field
    help: "Comma separated list of taxonomic levels used in Kraken2. Will overwrite default values."

  kraken2_confidence:
    label: "kraken2_confidence"
    widget: number_field
    value: 0.0
    step: 1
    help: "Confidence score threshold for taxonomic classification."

  sintax_ref_taxonomy:
    label: "sintax_ref_taxonomy"
    widget: select
    options:
      - ['coidb', 'coidb']
      - ['coidb=221216', 'coidb=221216']
      - ['unite-fungi', 'unite-fungi']
      - ['unite-fungi=10.0', 'unite-fungi=10.0']
      - ['unite-fungi=9.0', 'unite-fungi=9.0']
      - ['unite-fungi=8.3', 'unite-fungi=8.3']
      - ['unite-fungi=8.2', 'unite-fungi=8.2']
      - ['unite-alleuk', 'unite-alleuk']
      - ['unite-alleuk=10.0', 'unite-alleuk=10.0']
      - ['unite-alleuk=9.0', 'unite-alleuk=9.0']
      - ['unite-alleuk=8.3', 'unite-alleuk=8.3']
      - ['unite-alleuk=8.2', 'unite-alleuk=8.2']
    help: "Name of supported database, and optionally also version number"

  addsh:
    label: "addsh"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If ASVs should be assigned to UNITE species hypotheses (SHs). Only relevant for ITS data."

  cut_its:
    label: "cut_its"
    widget: select
    options:
      - ['none', 'none']
      - ['full', 'full']
      - ['its1', 'its1']
      - ['its2', 'its2']
    help: "Part of ITS region to use for taxonomy assignment: `full`, `its1`, or `its2`"

  its_partial:
    label: "its_partial"
    widget: number_field
    value: 0
    step: 1
    help: "Cutoff for partial ITS sequences. Only full sequences by default."

  multiregion_taxonomic_database:
    label: "Multi-region taxonomic database"
    widget: 'check_box'
    html_options:
      data:
        hide-sidle_ref_taxonomy-when-un-checked: true
        hide-sidle_ref_tax_custom-when-un-checked: true
        hide-sidle_ref_seq_custom-when-un-checked: true
        hide-sidle_ref_aln_custom-when-un-checked: true
        hide-sidle_ref_tree_custom-when-un-checked: true
        hide-sidle_ref_degenerates-when-un-checked: true
        hide-sidle_ref_cleaning-when-un-checked: true
    help: "Choose database for taxonomic assignments with multi-region amplicons using SIDLE"

  sidle_ref_taxonomy:
    label: "sidle_ref_taxonomy"
    widget: select
    options:
      - ['silva', 'silva']
      - ['silva=128', 'silva=128']
      - ['greengenes', 'greengenes']
      - ['greengenes=13_8', 'greengenes=13_8']
      - ['greengenes88', 'greengenes88']
    help: "Name of supported database, and optionally also version number"

  sidle_ref_tax_custom:
    label: "sidle_ref_tax_custom"
    widget: text_field
    help: "Path to reference taxonomy strings (headerless, *.txt)"

  sidle_ref_seq_custom:
    label: "sidle_ref_seq_custom"
    widget: text_field
    help: "Path to reference taxonomy sequences in fasta format"

  sidle_ref_aln_custom:
    label: "sidle_ref_aln_custom"
    widget: text_field
    help: "Path to multiple sequence alignment of reference taxonomy sequences in fasta format"

  sidle_ref_tree_custom:
    label: "sidle_ref_tree_custom"
    widget: text_field
    help: "Path to SIDLE reference taxonomy tree (*.qza)"

  sidle_ref_degenerates:
    label: "sidle_ref_degenerates"
    widget: number_field
    value: 5
    step: 1
    help: "Exclude reference sequences with more than this much degenerates"

  sidle_ref_cleaning:
    label: "sidle_ref_cleaning"
    widget: text_field
    help: "Arguments for `qiime sidle reconstruct-taxonomy` regarding ad-hoc cleaning"

  asv_filtering:
    label: "ASV filtering"
    widget: 'check_box'
    html_options:
      data:
        hide-exclude_taxa-when-un-checked: true
        hide-min_frequency-when-un-checked: true
        hide-min_samples-when-un-checked: true
    help: "Filtering by taxonomy or abundance will affect all downstream analysis"

  exclude_taxa:
    label: "exclude_taxa"
    widget: text_field
    value: "mitochondria,chloroplast"
    help: "Comma separated list of unwanted taxa, to skip taxa filtering use `none`"

  min_frequency:
    label: "min_frequency"
    widget: number_field
    value: 1
    step: 1
    help: "Abundance filtering"

  min_samples:
    label: "min_samples"
    widget: number_field
    value: 1
    step: 1
    help: "Prevalence filtering"

  downstream_analysis:
    label: "Downstream analysis"
    widget: 'check_box'
    html_options:
      data:
        hide-metadata_category-when-un-checked: true
        hide-metadata_category_barplot-when-un-checked: true
        hide-qiime_adonis_formula-when-un-checked: true
        hide-picrust-when-un-checked: true
        hide-sbdiexport-when-un-checked: true
        hide-diversity_rarefaction_depth-when-un-checked: true
        hide-tax_agglom_min-when-un-checked: true
        hide-tax_agglom_max-when-un-checked: true
    help: "Metadata is used here to visualize data either for quality control or publication ready figures"

  metadata_category:
    label: "metadata_category"
    widget: text_field
    help: "Comma separated list of metadata column headers for statistics."

  metadata_category_barplot:
    label: "metadata_category_barplot"
    widget: text_field
    help: "Comma separated list of metadata column headers for plotting average relative abundance barplots."

  qiime_adonis_formula:
    label: "qiime_adonis_formula"
    widget: text_field
    help: "Formula for QIIME2 ADONIS metadata feature importance test for beta diversity distances"

  picrust:
    label: "picrust"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If the functional potential of the bacterial community is predicted."

  sbdiexport:
    label: "sbdiexport"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If data should be exported in SBDI (Swedish biodiversity infrastructure) Excel format."

  diversity_rarefaction_depth:
    label: "diversity_rarefaction_depth"
    widget: number_field
    value: 500
    step: 1
    help: "Minimum rarefaction depth for diversity analysis. Any sample below that threshold will be removed."

  tax_agglom_min:
    label: "tax_agglom_min"
    widget: number_field
    value: 2
    step: 1
    help: "Minimum taxonomy agglomeration level for taxonomic classifications"

  tax_agglom_max:
    label: "tax_agglom_max"
    widget: number_field
    value: 6
    step: 1
    help: "Maximum taxonomy agglomeration level for taxonomic classifications"

  differential_abundance_analysis:
    label: "Differential abundance analysis"
    widget: 'check_box'
    html_options:
      data:
        hide-ancom_sample_min_count-when-un-checked: true
        hide-ancom-when-un-checked: true
        hide-ancombc-when-un-checked: true
        hide-ancombc_formula-when-un-checked: true
        hide-ancombc_formula_reflvl-when-un-checked: true
        hide-ancombc_effect_size-when-un-checked: true
        hide-ancombc_significance-when-un-checked: true
    help: "Differential abundance analysis relies on provided metadata"

  ancom_sample_min_count:
    label: "ancom_sample_min_count"
    widget: number_field
    value: 1
    step: 1
    help: "Minimum sample counts to retain a sample for ANCOM analysis. Any sample below that threshold will be removed."

  ancom:
    label: "ancom"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Perform differential abundance analysis with ANCOM"

  ancombc:
    label: "ancombc"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Perform differential abundance analysis with ANCOMBC"

  ancombc_formula:
    label: "ancombc_formula"
    widget: text_field
    help: "Formula to perform differential abundance analysis with ANCOMBC"

  ancombc_formula_reflvl:
    label: "ancombc_formula_reflvl"
    widget: text_field
    help: "Reference level for `--ancombc_formula`"

  ancombc_effect_size:
    label: "ancombc_effect_size"
    widget: number_field
    value: 1
    step: 1
    help: "Effect size threshold for differential abundance barplot for `--ancombc` and `--ancombc_formula`"

  ancombc_significance:
    label: "ancombc_significance"
    widget: number_field
    value: 0.05
    step: 1
    help: "Significance threshold for differential abundance barplot for `--ancombc` and `--ancombc_formula`"

  pipeline_report:
    label: "Pipeline summary report"
    widget: 'check_box'
    html_options:
      data:
        hide-report_template-when-un-checked: true
        hide-report_css-when-un-checked: true
        hide-report_logo-when-un-checked: true
        hide-report_title-when-un-checked: true
        hide-report_abstract-when-un-checked: true
    help: "Customization of the pipeline report"

  report_template:
    label: "report_template"
    widget: text_field
    value: "${projectDir}/assets/report_template.Rmd"
    help: "Path to Markdown file (Rmd)"

  report_css:
    label: "report_css"
    widget: text_field
    value: "${projectDir}/assets/nf-core_style.css"
    help: "Path to style file (css)"

  report_logo:
    label: "report_logo"
    widget: text_field
    value: "${projectDir}/assets/nf-core-ampliseq_logo_light_long.png"
    help: "Path to logo file (png)"

  report_title:
    label: "report_title"
    widget: text_field
    value: "Summary of analysis results"
    help: "String used as report title"

  report_abstract:
    label: "report_abstract"
    widget: text_field
    help: "Path to Markdown file (md) that replaces the `Abstract` section"

  skipping_specific_steps:
    label: "Skipping specific steps"
    widget: 'check_box'
    html_options:
      data:
        hide-skip_fastqc-when-un-checked: true
        hide-skip_cutadapt-when-un-checked: true
        hide-skip_dada_quality-when-un-checked: true
        hide-skip_barrnap-when-un-checked: true
        hide-skip_qiime-when-un-checked: true
        hide-skip_qiime_downstream-when-un-checked: true
        hide-skip_taxonomy-when-un-checked: true
        hide-skip_dada_taxonomy-when-un-checked: true
        hide-skip_dada_addspecies-when-un-checked: true
        hide-skip_barplot-when-un-checked: true
        hide-skip_abundance_tables-when-un-checked: true
        hide-skip_alpha_rarefaction-when-un-checked: true
        hide-skip_diversity_indices-when-un-checked: true
        hide-skip_phyloseq-when-un-checked: true
        hide-skip_tse-when-un-checked: true
        hide-skip_multiqc-when-un-checked: true
        hide-skip_report-when-un-checked: true

  skip_fastqc:
    label: "skip_fastqc"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip FastQC"

  skip_cutadapt:
    label: "skip_cutadapt"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip primer trimming with cutadapt. This is not recommended! Use only in case primer sequences were removed before and the data does not contain any primer sequences."

  skip_dada_quality:
    label: "skip_dada_quality"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip quality check with DADA2. Can only be skipped when `--trunclenf` and `--trunclenr` are set."

  skip_barrnap:
    label: "skip_barrnap"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip annotating SSU matches."

  skip_qiime:
    label: "skip_qiime"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip all steps that are executed by QIIME2, including QIIME2 software download, taxonomy assignment by QIIME2, barplots, relative abundance tables, diversity analysis, differential abundance testing."

  skip_qiime_downstream:
    label: "skip_qiime_downstream"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip steps that are executed by QIIME2 except for taxonomic classification. Skip steps including barplots, relative abundance tables, diversity analysis, differential abundance testing."

  skip_taxonomy:
    label: "skip_taxonomy"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip taxonomic classification. Incompatible with `--sbdiexport`"

  skip_dada_taxonomy:
    label: "skip_dada_taxonomy"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip taxonomic classification with DADA2"

  skip_dada_addspecies:
    label: "skip_dada_addspecies"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip species level when using DADA2 for taxonomic classification. This reduces the required memory dramatically under certain conditions. Incompatible with `--sbdiexport`"

  skip_barplot:
    label: "skip_barplot"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip producing barplot"

  skip_abundance_tables:
    label: "skip_abundance_tables"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip producing any relative abundance tables"

  skip_alpha_rarefaction:
    label: "skip_alpha_rarefaction"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip alpha rarefaction"

  skip_diversity_indices:
    label: "skip_diversity_indices"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip alpha and beta diversity analysis"

  skip_phyloseq:
    label: "skip_phyloseq"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip exporting phyloseq rds object(s)"

  skip_tse:
    label: "skip_tse"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip exporting TreeSummarizedExperiment rds object(s)"

  skip_multiqc:
    label: "skip_multiqc"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip MultiQC reporting"

  skip_report:
    label: "skip_report"
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip Markdown summary report"


form:
  - bc_num_hours
  - executor
  - partition
  - num_cores
  - num_memory
  - workdir
  - input_output_options
  - input
  - input_fasta
  - input_folder
  - fw_primer
  - rv_primer
  - metadata
  - multiregion
  - outdir
  - save_intermediates
  - sequencing_input
  - illumina_novaseq
  - pacbio
  - iontorrent
  - single_end
  - illumina_pe_its
  - quality_type
  - multiple_sequencing_runs
  - extension
  - min_read_counts
  - ignore_empty_input_files
  - primer_removal
  - retain_untrimmed
  - cutadapt_min_overlap
  - cutadapt_max_error_rate
  - double_primer
  - ignore_failed_trimming
  - read_trimming_and_quality_filtering
  - truncq
  - trunclenf
  - trunclenr
  - trunc_qmin
  - trunc_rmin
  - max_ee
  - min_len
  - max_len
  - ignore_failed_filtering
  - amplicon_sequence_variants_asv_calculation
  - sample_inference
  - mergepairs_strategy
  - mergepairs_consensus_match
  - mergepairs_consensus_mismatch
  - mergepairs_consensus_gap
  - mergepairs_consensus_minoverlap
  - mergepairs_consensus_maxmismatch
  - mergepairs_consensus_percentile_cutoff
  - asv_post_processing
  - vsearch_cluster
  - vsearch_cluster_id
  - raise_filter_stacksize
  - filter_ssu
  - min_len_asv
  - max_len_asv
  - filter_codons
  - orf_start
  - orf_end
  - stop_codons
  - taxonomic_assignment
  - dada_ref_taxonomy
  - dada_ref_tax_custom
  - dada_ref_tax_custom_sp
  - dada_min_boot
  - dada_assign_taxlevels
  - cut_dada_ref_taxonomy
  - dada_addspecies_allowmultiple
  - dada_taxonomy_rc
  - dada_assign_chunksize
  - pplace_tree
  - pplace_aln
  - pplace_model
  - pplace_alnmethod
  - pplace_taxonomy
  - qiime_ref_taxonomy
  - qiime_ref_tax_custom
  - classifier
  - kraken2_ref_taxonomy
  - kraken2_ref_tax_custom
  - kraken2_assign_taxlevels
  - kraken2_confidence
  - sintax_ref_taxonomy
  - addsh
  - cut_its
  - its_partial
  - multiregion_taxonomic_database
  - sidle_ref_taxonomy
  - sidle_ref_tax_custom
  - sidle_ref_seq_custom
  - sidle_ref_aln_custom
  - sidle_ref_tree_custom
  - sidle_ref_degenerates
  - sidle_ref_cleaning
  - asv_filtering
  - exclude_taxa
  - min_frequency
  - min_samples
  - downstream_analysis
  - metadata_category
  - metadata_category_barplot
  - qiime_adonis_formula
  - picrust
  - sbdiexport
  - diversity_rarefaction_depth
  - tax_agglom_min
  - tax_agglom_max
  - differential_abundance_analysis
  - ancom_sample_min_count
  - ancom
  - ancombc
  - ancombc_formula
  - ancombc_formula_reflvl
  - ancombc_effect_size
  - ancombc_significance
  - pipeline_report
  - report_title
  - report_abstract
  - skipping_specific_steps
  - skip_fastqc
  - skip_cutadapt
  - skip_dada_quality
  - skip_barrnap
  - skip_qiime
  - skip_qiime_downstream
  - skip_taxonomy
  - skip_dada_taxonomy
  - skip_dada_addspecies
  - skip_barplot
  - skip_abundance_tables
  - skip_alpha_rarefaction
  - skip_diversity_indices
  - skip_phyloseq
  - skip_tse
  - skip_multiqc
  - skip_report
  - tower_access_token
  - resume
