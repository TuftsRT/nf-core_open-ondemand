---
cluster: "tuftshpc"

attributes:
<%= File.read("/etc/ood/config/apps/dashboard/batch_connect/partials/reservation.yml").indent(2) %>
  executor:
    label: Which nextflow executor to use?
    widget: select
    options:
    - ["slurm", "slurm"]
    - ["local", "local"]
    help: |
      With slurm, tasks will be distributed to different nodes, local means all tasks will run on a single node.

  cpu_partition:
    widget: "select"
    label: "Partition"
    help: "NOTE: Please do not choose specific lab partitions if you are not a member of that lab."
    value: "batch"
    options:
      - ["batch","batch"]
      - ["largemem", "largemem"]
      - ["preempt", "preempt"]
      - ["patralab", "patralab"]

  num_core:
    widget: number_field
    label: Cores
    min: 1
    max: 128
    value: 1
    help: |
      Number of cores (up to 128) for a shared job.  Non-shared jobs will have exclusive nodes and be charged at 128 cores per node requested

  num_memory:
    widget: "select"
    label: "Amount of memory"
    options:
    - ["1GB", 1GB]
    - ["2GB", 2GB]
    - ["4GB", 4GB]
    - ["8GB", 8GB]
    - ["16GB", 16GB]
    - ["32GB", 32GB]
    - ["64GB", 64GB]
    - ["72GB", 72GB]
    - ["80GB", 80GB]
    - ["96GB", 96GB]
    - ["128GB", 128GB]
    - ["160GB", 160GB]
    - ["256GB", 256GB]

  workdir:
    label: "Working Directory"
    data-filepicker: true
    data-target-file-type: dirs  # Valid values are: files, dirs, or both
    readonly: false
    help: "Select your project directory; defaults to $HOME"
    
  resume:
    label: resume
    widget: check_box
    checked_value: 1
    unchecked_value: 0
    help: |
           Resume previous run if found

  TOWER_ACCESS_TOKEN:
    widget: "text_field"
    required: false
    label: "TOWER_ACCESS_TOKEN (Optional)"
    help: "Your TOWER_ACCESS_TOKEN used to monitor runs on [Nextflow Tower](https://seqera.io)."


  version:
    label: Version
    widget: select
    options:
      - ['1.1.0', '/cluster/tufts/biocontainers/nf-core/pipelines/nf-core-denovotranscript/1.1.0/1_1_0']
      - ['1.0.0', '/cluster/tufts/biocontainers/nf-core/pipelines/nf-core-denovotranscript/1.0.0/1_0_0']

  qc_only:
    label: qc_only
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Whether the pipeline should only perform quality control, and skip assembly and quantification."

  skip_assembly:
    label: skip_assembly
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Whether the pipeline should skip assembly steps, and only perform quality control of reads and quantification. --transcript_fasta must be provided if True."

  input:
    label: input
    widget: text_field
    help: "Path to comma-separated file containing information about the samples in the experiment."

  outdir:
    label: outdir
    widget: text_field
    help: "The output directory where the results will be saved. You have to use absolute paths to storage on Cloud infrastructure."

  transcript_fasta:
    label: transcript_fasta
    widget: text_field
    help: "Path to fasta file (not compressed) containing a transcriptome assembly. Only needed if `--skip_assembly` is `True`."

  multiqc_title:
    label: multiqc_title
    widget: text_field
    help: "MultiQC report title. Printed as page header, used for filename if not otherwise specified."

  adapter_fasta:
    label: adapter_fasta
    widget: text_field
    help: "File in FASTA format containing possible adapters to remove. Accepted formats: *.{fasta,fna,fas,fa}"

  save_trimmed_fail:
    label: save_trimmed_fail
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Specify `true` to save files that failed to pass trimming thresholds ending in *.fail.fastq.gz"

  save_merged:
    label: save_merged
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Specify true to save all merged reads to the a file ending in *.merged.fastq.gz"

  skip_fastp:
    label: skip_fastp
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip the fastp process if `true`"

  skip_fastqc:
    label: skip_fastqc
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip FastQC processes if `true`"

  extra_fastp_args:
    label: extra_fastp_args
    widget: text_field
    help: "Extra arguements for fastp. For example, `--trim_front1 15 --trim_front2 15 --trim_tail1 5 --trim_tail2 5{:bash}`"

  remove_ribo_rna:
    label: remove_ribo_rna
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Enable the removal of reads derived from ribosomal RNA using SortMeRNA."

  ribo_database_manifest:
    value: "${projectDir}/assets/rrna-db-defaults.txt"
    label: ribo_database_manifest
    widget: text_field
    help: "Text file containing paths to fasta files (one per line) that will be used to create the database for SortMeRNA."

  save_non_ribo_reads:
    label: save_non_ribo_reads
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "If this option is specified, intermediate FastQ files containing non-rRNA reads will be saved in the results directory."

  assemblers:
    value: "trinity,rnaspades"
    label: assemblers
    widget: text_field
    help: "Assemblers to use. Possible options include `trinity`, `trinity_no_norm` (trinity without normalized reads), and `rnaspades`."

  extra_trinity_args:
    label: extra_trinity_args
    widget: text_field
    help: "Extra arguments to pass to Trinity command in addition to defaults. Applies to both trinity and trinity_no_norm."

  soft_filtered_transcripts:
    label: soft_filtered_transcripts
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Include hard filtered transcripts (in addition to medium filtered transcripts) from rnaSPAdes in the input to EvidentialGene tr2aacds."

  hard_filtered_transcripts:
    label: hard_filtered_transcripts
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Include soft filtered transcripts (in addition to the medium filtered transcripts) from rnaSPAdes in the input to EvidentialGene tr2aacds."

  ss:
    label: ss
    widget: text_field
    help: "Set strand-specific type for rnaSPAdes. Use `--ss rf` when first read in pair corresponds to reverse gene strand (antisense data, e.g. obtained via dUTP protocol) and `--ss fr` otherwise (forward)."

  extra_tr2aacds_args:
    label: extra_tr2aacds_args
    widget: text_field
    help: "Extra arguments for tr2aacds.pl. For example, `-MINAA=20`"

  busco_mode:
    value: "transcriptome"
    widget: select
    options:
      - ['genome', 'genome']
      - ['proteins', 'proteins']
      - ['transcriptome', 'transcriptome']
    label: busco_mode
    help: "The mode to run BUSCO in. One of genome, proteins, or transcriptome"

  busco_lineage:
    value: "auto"
    label: busco_lineage
    widget: text_field
    help: "The BUSCO lineage to use, or `auto` to automatically select lineage"

  busco_lineages_path:
    label: busco_lineages_path
    widget: text_field
    help: "Path to local BUSCO lineages directory."

  busco_config:
    label: busco_config
    widget: text_field
    help: "Path to BUSCO config file."

  fasta:
    label: fasta
    widget: text_field
    help: "Path to FASTA genome file."

  gtf:
    label: gtf
    widget: text_field
    help: "File with gene coordinates in GTF/GFF format (needs information about parent relations). rnaQUAST authors recommend to use files downloaded from GENCODE or Ensembl."

  transrate_reference:
    label: transrate_reference
    widget: text_field
    help: "Path to FASTA file of reference set of proteins or transcripts from a related species"

  lib_type:
    value: "A"
    label: lib_type
    widget: text_field
    help: "Override library type inferred based on strandedness defined in meta object. `A` for auto."


form:
  - bc_num_hours
  - executor
  - cpu_partition
  - num_core
  - num_memory
  - reservation
  - version
  - workdir
  - outdir
  - qc_only
  - skip_assembly
  - input
  - transcript_fasta
  - multiqc_title
  - adapter_fasta
  - save_trimmed_fail
  - save_merged
  - skip_fastp
  - skip_fastqc
  - extra_fastp_args
  - remove_ribo_rna
  - ribo_database_manifest
  - save_non_ribo_reads
  - assemblers
  - extra_trinity_args
  - soft_filtered_transcripts
  - hard_filtered_transcripts
  - ss
  - extra_tr2aacds_args
  - busco_mode
  - busco_lineage
  - busco_lineages_path
  - busco_config
  - fasta
  - gtf
  - transrate_reference
  - lib_type
  - TOWER_ACCESS_TOKEN
  - resume
