---
cluster: "tuftshpc"

attributes:
<%= File.read("/etc/ood/config/apps/dashboard/batch_connect/partials/reservation.yml").indent(2) %>
  executor:
    label: Which nextflow executor to use?
    widget: select
    options:
    - ["slurm", "slurm"]
    - ["local", "local"]
    help: |
      With slurm, tasks will be distributed to different nodes, local means all tasks will run on a single node.

  cpu_partition:
    widget: "select"
    label: "Partition"
    help: "NOTE: Please do not choose specific lab partitions if you are not a member of that lab."
    value: "batch"
    options:
      - ["batch","batch"]
      - ["largemem", "largemem"]
      - ["preempt", "preempt"]
      - ["patralab", "patralab"]

  num_core:
    widget: number_field
    label: Cores
    min: 1
    max: 128
    value: 1
    help: |
      Number of cores (up to 128) for a shared job.  Non-shared jobs will have exclusive nodes and be charged at 128 cores per node requested

  num_memory:
    widget: "select"
    label: "Amount of memory"
    options:
    - ["1GB", 1GB]
    - ["2GB", 2GB]
    - ["4GB", 4GB]
    - ["8GB", 8GB]
    - ["16GB", 16GB]
    - ["32GB", 32GB]
    - ["64GB", 64GB]
    - ["72GB", 72GB]
    - ["80GB", 80GB]
    - ["96GB", 96GB]
    - ["128GB", 128GB]
    - ["160GB", 160GB]
    - ["256GB", 256GB]

  workdir:
    label: "Working Directory"
    data-filepicker: true
    data-target-file-type: dirs  # Valid values are: files, dirs, or both
    readonly: false
    help: "Select your project directory; defaults to $HOME"
    
  resume:
    label: resume
    widget: check_box
    checked_value: 1
    unchecked_value: 0
    help: |
           Resume previous run if found

  TOWER_ACCESS_TOKEN:
    widget: "text_field"
    required: false
    label: "TOWER_ACCESS_TOKEN (Optional)"
    help: "Your TOWER_ACCESS_TOKEN used to monitor runs on [Nextflow Tower](https://seqera.io)."


  version:
    label: Version
    widget: select
    options:
      - ['1.0.0', '/cluster/tufts/biocontainers/nf-core/pipelines/nf-core-multiplesequencealign/1.0.0/1_0_0']

  input:
    label: input
    widget: text_field
    help: "Path to comma-separated file containing information about the samples in the experiment."

  tools:
    label: tools
    widget: text_field
    help: "Path to comma-separated file containing information about the tools to be used in the experiment."

  templates_suffix:
    label: templates_suffix
    widget: text_field
    help: "Suffix of the dependencies templates."

  outdir:
    label: outdir
    widget: text_field
    help: "The output directory where the results will be saved. You have to use absolute paths to storage on Cloud infrastructure."

  multiqc_title:
    label: multiqc_title
    widget: text_field
    help: "MultiQC report title. Printed as page header, used for filename if not otherwise specified."

  build_consensus:
    label: build_consensus
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Build consensus alignment with M-COFFEE."

  skip_stats:
    label: skip_stats
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip all of the statistics computation on the fasta file."

  calc_sim:
    label: calc_sim
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Calculate the percentage similarity across the sequences in the input files."

  calc_seq_stats:
    label: calc_seq_stats
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Calculate general statistics on input files."

  extract_plddt:
    label: extract_plddt
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Extract plddt from structure files. Only works if the files have been generated by AF2."

  calc_gaps:
    label: calc_gaps
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Extract total number of gaps and average number of gaps of the alignment."

  skip_eval:
    label: skip_eval
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip all of the evaluations computation on the msa."

  calc_sp:
    label: calc_sp
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Calculate the Sum of Pairs of alignment."

  calc_tc:
    label: calc_tc
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Calculate the Total Column Score of alignment."

  calc_irmsd:
    label: calc_irmsd
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Calculate the iRMSD of alignment."

  calc_tcs:
    label: calc_tcs
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Calculate the Transitive Consistency Score (TCS) of alignment."

  skip_multiqc:
    label: skip_multiqc
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip the multiqc report generation."

  skip_shiny:
    label: skip_shiny
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Skip the shiny report generation."

  shiny_app:
    label: shiny_app
    widget: text_field
    help: "File containing the main shiny app."

  shiny_trace_mode:
    label: shiny_trace_mode
    widget: text_field
    help: "variable containing the shiny_trace mode to be used."

  skip_compression:
    label: skip_compression
    widget: select
    options:
      - ['false', 'false']
      - ['true', 'true']
    help: "Produce uncompressed alignment files"


form:
  - bc_num_hours
  - executor
  - cpu_partition
  - num_core
  - num_memory
  - reservation
  - version
  - workdir
  - outdir
  - input
  - tools
  - templates_suffix
  - multiqc_title
  - build_consensus
  - skip_stats
  - calc_sim
  - calc_seq_stats
  - extract_plddt
  - calc_gaps
  - skip_eval
  - calc_sp
  - calc_tc
  - calc_irmsd
  - calc_tcs
  - skip_multiqc
  - skip_shiny
  - shiny_app
  - shiny_trace_mode
  - skip_compression
  - TOWER_ACCESS_TOKEN
  - resume
